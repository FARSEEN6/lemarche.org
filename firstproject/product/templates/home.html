{% extends "index.html" %}
{% block title %}Home ‚Äì Le Marche{% endblock %}
{% block content %}

<style>
  /* ---------- GLOBAL ---------- */
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  /* generic sections that react to dark mode */
  .section-default {
    background: transparent;
  }

  .section-muted {
    background: #f3f4f6;
  }

  body.dark-mode .section-muted {
    background: #020617;
  }

  /* ---------- HERO ---------- */
  .hero-section {
    position: relative;
    min-height: 100vh;
    display: flex;
    align-items: center;
    color: #f9fafb;
    overflow: hidden;
  }

  .hero-bg {
    position: absolute;
    inset: 0;
    background: url("https://c0.wallpaperflare.com/preview/815/825/234/car-dial-interior-light.jpg") center/cover no-repeat;
    filter: brightness(1.45);
  }

  body.dark-mode .hero-bg {
    filter: brightness(1.28);
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg,
        rgba(0, 0, 0, 0.55),
        rgba(0, 0, 0, 0.85));
  }

  .hero-content {
    position: relative;
    z-index: 5;
  }

  .hero-kicker {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.25rem 0.9rem;
    background: rgba(0, 0, 0, 0.55);
    border-radius: 999px;
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .hero-title {
    font-weight: 700;
    letter-spacing: -0.04em;
  }

  .hero-subtitle {
    max-width: 520px;
    color: #e5e7eb;
  }

  /* ---------- GENERIC PILL BUTTON ---------- */
  .btn-pill {
    border-radius: 999px !important;
    padding: 0.6rem 1.6rem;
    font-weight: 600;
  }

  /* ---------- FEATURES ---------- */
  .feature-card {
    border-radius: 16px;
    border: 1px solid #e5e7eb;
    background: #ffffff;
    padding: 18px;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    height: 100%;
  }

  .feature-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 32px rgba(15, 23, 42, 0.08);
    border-color: #d1d5db;
  }

  body.dark-mode .feature-card {
    background: #020617;
    border-color: #1f2937;
  }

  body.dark-mode .feature-card:hover {
    border-color: #4b5563;
  }

  .feature-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.3rem;
  }

  .feature-text {
    font-size: 0.9rem;
    color: #6b7280;
  }

  body.dark-mode .feature-text {
    color: #9ca3af;
  }

  /* ---------- CATEGORY PILLS ---------- */
  .category-pill {
    border-radius: 999px;
    padding: 0.35rem 0.9rem;
    font-size: 0.85rem;
    border: 1px solid #e5e7eb;
    background: #f9fafb;
    color: #374151;
    text-decoration: none;
  }

  .category-pill:hover {
    background: #111827;
    color: #f9fafb;
  }

  body.dark-mode .category-pill {
    border-color: #374151;
    background: #020617;
    color: #e5e7eb;
  }

  body.dark-mode .category-pill:hover {
    background: #f9fafb;
    color: #020617;
  }

  /* ---------- PRODUCT CARDS ---------- */
  .home-product-card {
    border-radius: 14px;
    overflow: hidden;
    border: 1px solid #e5e7eb;
    background: #ffffff !important;
    /* light-mode card */
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  }

  .home-product-card:hover {
    transform: translateY(-4px);
    border-color: #d1d5db;
    box-shadow: 0 12px 30px rgba(15, 23, 42, 0.12);
  }

  body.dark-mode .home-product-card {
    background: #020617 !important;
    /* dark card */
    border-color: #1f2937;
  }

  body.dark-mode .home-product-card:hover {
    border-color: #334155;
  }

  .home-product-img {
    width: 100%;
    height: 210px;
    object-fit: contain;
    padding: 12px;
    background: white;
    border-bottom: 1px solid #e5e7eb;
  }

  body.dark-mode .home-product-img {
    border-bottom-color: #1f2937;
  }

  .home-product-title {
    font-size: 0.98rem;
    font-weight: 600;
    margin-bottom: 0.15rem;
  }

  .home-product-meta {
    font-size: 0.8rem;
    color: #6b7280;
  }

  body.dark-mode .home-product-meta {
    color: #9ca3af;
  }

  .home-product-price {
    font-size: 0.98rem;
    font-weight: 700;
  }

  .btn-view-small {
    border-radius: 999px;
    padding: 0.35rem 0.8rem;
    font-size: 0.85rem;
    font-weight: 600;
  }

  /* ---------- TESTIMONIAL STRIP ---------- */
  .testimonial-strip {
    border-radius: 16px;
    padding: 18px 20px;
    background: #0f172a;
    color: #e5e7eb;
  }

  body.dark-mode .testimonial-strip {
    background: #1e293b;
  }

  .testimonial-quote {
    font-size: 0.9rem;
  }

  @media screen and (max-width: 768px) {
    .hero-section {
      min-height: 60vh;
      padding-top: 4rem;
      padding-bottom: 4rem;
    }

  }
</style>

<!-- ===== HERO ===== -->
<section class="hero-section">
  <div class="hero-bg"></div>
  <div class="hero-overlay"></div>

  <div class="container hero-content">
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center text-lg-start">
        <div class="hero-kicker mb-3">
          <span style="width:8px; height:8px; border-radius:999px; background:#22c55e;"></span>
          Trusted Store
        </div>

        <h1 class="hero-title display-5 mb-2">
          Le Marche
        </h1>

        <p class="hero-subtitle mb-4">
          Premium gadgets, laptops & accessories ‚Äî
        </p>

        <a href="{% url 'product' %}" class="btn btn-light btn-pill">
          Browse all products
        </a>
      </div>
    </div>
  </div>
</section>

<!-- ===== FEATURES ===== -->
<section class="section-default py-5">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
      <h2 class="h4 mb-0">Why choose Le Marche</h2>
      <span class="text-muted small">Built for everyday buyers, not tech experts.</span>
    </div>

    <div class="row g-3">
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-title">Carefully selected products</div>
          <p class="feature-text mb-0">
            We focus on reliable brands and models that actually make sense for real use, not just specs on paper.
          </p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-title">Genuine and transparent</div>
          <p class="feature-text mb-0">
            Clear details, honest suggestions and straightforward pricing. No confusing upsells.
          </p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-title">Local support you can reach</div>
          <p class="feature-text mb-0">
            We‚Äôre based in Malappuram, so if something goes wrong, you know exactly who to call.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ===== SHOP BY CATEGORY ===== -->
<section class="section-default pb-4">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-2 flex-wrap gap-2">
      <h3 class="h5 mb-0">Shop by category</h3>
      <a href="{% url 'product' %}" class="small text-decoration-none text-muted">
        View all products ‚Üí
      </a>
    </div>

    <div class="d-flex flex-wrap gap-2">
      {% if categories %}
      {% for cat in categories %}
      <a href="{% url 'product' %}?category={{ cat }}" class="category-pill">
        {{ cat }}
      </a>
      {% endfor %}
      {% else %}
      <span class="small text-muted">
        Categories will appear here when you add more products.
      </span>
      {% endif %}
    </div>
  </div>
</section>

<!-- ===== LATEST PRODUCTS ===== -->
<section id="latest-products" class="section-muted py-5">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
      <h2 class="h5 mb-0">Latest arrivals</h2>
      <span class="small text-muted">
        A quick look at some of the items currently in the store.
      </span>
    </div>

    <div class="row g-4">
      {% for prod in products %}
      <div class="col-6 col-md-4 col-lg-3">
        <div class="home-product-card h-100">

          {% if prod.p_image %}
          <a href="{% url 'detail_page' prod.id %}">
            <img src="{{ prod.p_image.url }}" alt="{{ prod.p_name }}" loading="lazy" class="home-product-img">
          </a>
          {% else %}
          <img src="https://www.freeiconspng.com/uploads/no-image-icon-23.jpg" alt="No image available" loading="lazy"
            class="home-product-img">
          {% endif %}

          <div class="p-3 d-flex flex-column">
            <div class="home-product-title">
              {{ prod.p_name|truncatechars:30 }}
            </div>

            <div class="home-product-meta mb-1">
              {{ prod.p_category }}
            </div>

            <div class="home-product-price text-success mb-3">
              ‚Çπ{{ prod.p_price }}
            </div>

            <div class="d-flex gap-2 mt-auto">
              <a href="{% url 'detail_page' prod.id %}" class="btn btn-dark btn-view-small flex-grow-1">
                View ‚Üí
              </a>
              {% if user.is_authenticated %}
              <a href="{% url 'add_to_cart' prod.id %}" class="btn btn-outline-secondary btn-view-small">
                üõí
              </a>
              {% endif %}
            </div>
          </div>

        </div>
      </div>
      {% empty %}
      <div class="col-12">
        <p class="text-muted mb-0">No products added yet. Once you add items, they‚Äôll appear here.</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- ===== TESTIMONIAL STRIP ===== -->
<section class="section-default pb-5">
  <div class="container">
    <div class="testimonial-strip">
      <div class="row align-items-center g-3">
        <div class="col-md-8">
          <p class="testimonial-quote mb-1">
            ‚ÄúOrdering from Le Marche feels like talking to a friend who actually understands tech.‚Äù
          </p>
          <span class="testimonial-name small">Customer feedback, Malappuram</span>
        </div>
        <div class="col-md-4 text-md-end mt-2 mt-md-0">
          <span class="small">
            Need help choosing a device? Just call or WhatsApp us ‚Äî we‚Äôll walk you through it.
          </span>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}